<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:util="http://www.springframework.org/schema/util"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-4.0.xsd
http://www.springframework.org/schema/util
http://www.springframework.org/schema/util/spring-util-2.5.xsd">

    <bean id="userFactory" class="com.smalaca.messagesender.domain.UserFactory"/>
    <bean id="userDto" class="com.smalaca.messagesender.service.UserDto">
        <property name="login" value="franek"/>
        <property name="email" value="franek@gmail.com"/>
    </bean>
    <bean id="user1" factory-bean="userFactory" factory-method="createFrom">
        <constructor-arg ref="userDto"/>
    </bean>

    <util:map id="users">
        <entry key="franek" value-ref="user1"/>
    </util:map>

</beans>